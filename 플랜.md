# 미니게임 플랫폼 기획서

## 1. 프로젝트 개요

### 목표
- 가볍게 즐길 수 있는 캐주얼 미니게임 플랫폼
- 어떤 서비스(웹, 앱)에도 쉽게 임베드 가능한 구조
- 용량/리소스 제한 최소화

### 핵심 특징
- **경량화**: 번들 사이즈 최소화 (목표: 게임당 < 100KB)
- **독립성**: 외부 의존성 최소화, 순수 JavaScript/TypeScript
- **임베더블**: iframe 또는 Web Component로 제공
- **오프라인 지원**: 네트워크 없이도 플레이 가능

---

## 2. 기술 스택

### 프론트엔드
- **프레임워크**: Next.js 14+ (App Router)
- **스타일링**: Tailwind CSS
- **상태관리**: Zustand (경량) 또는 React Context
- **배포**: Vercel (Next.js 최적화)

### 게임 엔진
- **2D 렌더링**: Canvas API (내장, 추가 용량 없음)
- **애니메이션**: requestAnimationFrame (네이티브)
- **사운드**: Web Audio API (선택적, 용량 절약)

### 백엔드 (랭킹 시스템용)
- **서버리스**: Cloudflare Workers 또는 Vercel Edge Functions
- **데이터베이스**:
  - Cloudflare D1 (SQLite 기반, 무료)
  - 또는 Supabase (PostgreSQL, 무료 티어)
- **인증**: 익명 UUID 기반 (간단) 또는 OAuth 연동

---

## 3. 게임 라인업 (1차)

### 3.1 스도쿠 (Sudoku)
- 난이도: Normal / Hard / Expert / Master / Extreme~
  - Normal: 빈 칸 35~40개 (입문용)
  - Hard: 빈 칸 45~50개 (중급)
  - Expert: 빈 칸 50~55개 (고급 테크닉 필요)
  - Master: 빈 칸 55~58개 (X-Wing, Swordfish 등 필요)
  - Extreme: 빈 칸 58~64개 (극한 난이도, 백트래킹 필수)
- 기능: 힌트, 메모, 실행취소, 타이머
- 용량: ~30KB

### 3.2 2048
- 스와이프/키보드 조작
- 최고 점수 저장
- 용량: ~20KB

### 3.3 메모리 카드 게임
- 카드 매칭 게임
- 오픈소스 아이콘 사용 (Lucide Icons 등)
- 용량: ~25KB

### 3.4 지뢰찾기 (Minesweeper)
- 클래식 룰
- 세 가지 난이도
- 용량: ~25KB

---

## 4. 아키텍처

### 4.1 앱인앱 구조

```
┌─────────────────────────────────────────┐
│           호스트 애플리케이션              │
│  ┌───────────────────────────────────┐  │
│  │      MiniGame Container          │  │
│  │  ┌─────────────────────────────┐  │  │
│  │  │    <mini-game-widget>       │  │  │
│  │  │    Web Component 또는       │  │  │
│  │  │    iframe embed             │  │  │
│  │  └─────────────────────────────┘  │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
```

### 4.2 임베드 방식

#### 방식 1: Web Component (권장)
```html
<script src="https://cdn.example.com/minigames.js"></script>
<mini-game type="sudoku" theme="dark" />
```

#### 방식 2: iframe
```html
<iframe
  src="https://games.example.com/sudoku?theme=dark"
  width="400"
  height="600"
/>
```

#### 방식 3: npm 패키지
```javascript
import { SudokuGame } from '@minigames/sudoku';

const game = new SudokuGame({
  container: '#game-root',
  theme: 'dark',
  onScore: (score) => console.log(score)
});
```

---

## 5. 랭킹 시스템

### 5.1 구조

```
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│   게임 UI    │ ──▶  │   API 서버   │ ──▶  │   Database   │
│              │      │  (Serverless)│      │   (D1/SQL)   │
└──────────────┘      └──────────────┘      └──────────────┘
```

### 5.2 DB 스키마

```sql
-- 사용자 (익명 지원)
CREATE TABLE users (
  id TEXT PRIMARY KEY,
  nickname TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 게임 점수
CREATE TABLE scores (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id TEXT REFERENCES users(id),
  game_type TEXT NOT NULL,
  score INTEGER NOT NULL,
  difficulty TEXT,
  play_time_seconds INTEGER,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 일간/주간/월간 랭킹 뷰
CREATE VIEW daily_ranking AS
SELECT user_id, game_type, MAX(score) as best_score
FROM scores
WHERE created_at > datetime('now', '-1 day')
GROUP BY user_id, game_type
ORDER BY best_score DESC;
```

### 5.3 랭킹 타입
- **전체 랭킹**: 역대 최고 점수
- **일간 랭킹**: 오늘의 랭킹
- **주간 랭킹**: 이번 주 랭킹
- **친구 랭킹**: 호스트 앱 연동 시

---

## 6. 오픈소스 리소스

### 아이콘
- [Lucide Icons](https://lucide.dev/) - MIT 라이선스
- [Heroicons](https://heroicons.com/) - MIT 라이선스
- [Phosphor Icons](https://phosphoricons.com/) - MIT 라이선스

### 사운드 (선택)
- [Mixkit](https://mixkit.co/free-sound-effects/) - 무료
- [OpenGameArt](https://opengameart.org/) - 다양한 라이선스

### 폰트
- [Google Fonts](https://fonts.google.com/) - 오픈 폰트 라이선스
- 시스템 폰트 사용으로 용량 절약 가능

---

## 7. 개발 로드맵

### Phase 1: 기반 구축
- [ ] 프로젝트 세팅 (Vite + TypeScript)
- [ ] 게임 코어 엔진 개발
- [ ] Web Component 래퍼 구현
- [ ] 기본 UI/테마 시스템

### Phase 2: 첫 번째 게임
- [ ] 스도쿠 게임 개발
- [ ] 로컬 스토리지 저장
- [ ] 반응형 UI

### Phase 3: 랭킹 시스템
- [ ] API 서버 구축
- [ ] 데이터베이스 설계
- [ ] 랭킹 UI 컴포넌트

### Phase 4: 게임 확장
- [ ] 2048 추가
- [ ] 메모리 게임 추가
- [ ] 지뢰찾기 추가

### Phase 5: 배포 & 문서화
- [ ] CDN 배포
- [ ] npm 패키지 퍼블리시
- [ ] API 문서 작성
- [ ] 예제 프로젝트

---

## 8. 폴더 구조 (예상)

```
/game
├── src/
│   ├── app/                    # Next.js App Router
│   │   ├── page.tsx            # 메인 페이지 (게임 목록)
│   │   ├── layout.tsx
│   │   ├── sudoku/
│   │   │   └── page.tsx
│   │   ├── puzzle-2048/
│   │   │   └── page.tsx
│   │   ├── memory/
│   │   │   └── page.tsx
│   │   ├── minesweeper/
│   │   │   └── page.tsx
│   │   └── api/                # API Routes (랭킹)
│   │       └── ranking/
│   │
│   ├── components/
│   │   ├── games/              # 게임별 컴포넌트
│   │   │   ├── sudoku/
│   │   │   ├── puzzle-2048/
│   │   │   ├── memory/
│   │   │   └── minesweeper/
│   │   ├── ui/                 # 공통 UI (버튼, 모달 등)
│   │   └── ranking/            # 랭킹 컴포넌트
│   │
│   ├── lib/
│   │   ├── games/              # 게임 로직 (순수 함수)
│   │   │   ├── sudoku.ts
│   │   │   ├── puzzle-2048.ts
│   │   │   ├── memory.ts
│   │   │   └── minesweeper.ts
│   │   ├── db/                 # DB 연결
│   │   └── utils/
│   │
│   └── stores/                 # Zustand 스토어
│
├── public/                     # 정적 파일
├── prisma/                     # DB 스키마 (선택)
└── package.json
```

---

## 9. 성공 지표

- 게임당 번들 사이즈 < 100KB
- 첫 로딩 시간 < 1초 (3G 네트워크)
- Lighthouse 성능 점수 > 90
- 5줄 이내 코드로 임베드 가능

---

## 10. 참고 사항

### 장점
- 어디서든 쉽게 붙일 수 있음
- 서버 비용 최소화 (서버리스)
- 오프라인 지원 가능
- 커스터마이징 용이

### 고려사항
- 모바일 터치 지원 필수
- 다크모드/라이트모드 테마 지원
- 접근성(a11y) 고려
- i18n (다국어) 지원 준비
